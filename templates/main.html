<!DOCTYPE html>
<html lang="en">
<head>
	{% load static %}
	<title>Home | Cost Engine</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
<!--===============================================================================================-->
	<link rel="icon" type="image/png" href="{% static 'images/icons/favicon.ico' %}"/>
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="{% static 'vendor/bootstrap/css/bootstrap.min.css' %}">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="{% static 'fonts/font-awesome-4.7.0/css/font-awesome.min.css' %}">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="{% static 'vendor/animate/animate.css' %}">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="{% static 'vendor/css-hamburgers/hamburgers.min.css' %}">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="{% static 'vendor/animsition/css/animsition.min.css' %}">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="{% static 'vendor/select2/select2.min.css' %}">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="{% static 'vendor/daterangepicker/daterangepicker.css' %}">
<!--===============================================================================================-->
	<!-- <link rel="stylesheet" type="text/css" href="{% static 'css/util.css' %}"> -->
	<link rel="stylesheet" type="text/css" href="{% static 'css/main.css' %}">
<!--===============================================================================================-->
<style>
	.bg-colorwant{
		background: #a64bf4;
		background: -webkit-linear-gradient(left, #fc00ff, #00dbde, #fc00ff, #00dbde);
		background: -o-linear-gradient(left, #00dbde, #fc00ff, #00dbde, #fc00ff);
		background: -moz-linear-gradient(left, #00dbde, #fc00ff, #00dbde, #fc00ff);
		background: linear-gradient(left, #00dbde, #fc00ff, #00dbde, #fc00ff);
		top: 0;
		left: -100%;
		-webkit-transition: all 0.4s;
		-o-transition: all 0.4s;
		-moz-transition: all 0.4s;
		transition: all 0.4s;
	}
	.markk{
		background: #bb3abd;
		background: -webkit-linear-gradient(left, #05fbff, #fa8ffc, #00dbde, #9c369e);
		background: -o-linear-gradient(left,  #05fbff, #fa8ffc, #00dbde, #9c369e);
		background: -moz-linear-gradient(left,  #05fbff, #fa8ffc, #00dbde, #9c369e);
		background: linear-gradient(left,  #05fbff, #fa8ffc, #00dbde, #9c369e);
		top: 0;
		left: -100%;
		-webkit-transition: all 0.4s;
		-o-transition: all 0.4s;
		-moz-transition: all 0.4s;
		transition: all 0.4s;
	}
</style>
</head>
<body>
	<div class="container-contact100">
		<div class="wrap-contact100 shadow">
			<form class="contact100-form validate-form" id='myform' action="{% url 'temp' %}" method="post">
				{% csrf_token %}
				<span class="contact100-form-title">
					Cost Engine
				</span>
				<div class="wrap-input100 input100-select">
					<span class="label-input100">Region</span>
					<div>
						<select class="selection-2" id="sel1" name="region">
							<option>Select</option>
							{% for data in reg %} 
							<option id="{{ data.id }}">{{ data }}</option>
							{% endfor %}
						</select>
					</div>
					<span class="focus-input100"></span>
				</div>
				<div class="wrap-input100 input100-select" id="sel2">
					<span class="label-input100">Category</span>
					<div>
						<select class="selection-2" id='ddlcat'>
							
						</select>
					</div>
					<span class="focus-input100"></span>
				</div>
				<div class="wrap-input100 input100-select" id="sel3">
					<span class="label-input100">Sub Category</span>
					<div>
						<select class="selection-2" id='ddlsubcat'>
						</select>
					</div>
					<span class="focus-input100"></span>
				</div>
				<div class="wrap-input100 input100-select" id="product">
					<span class="label-input100">Products</span>
					<div>
						<select class="selection-2" id='ddlpro' name="sku">
						</select>
					</div>
					<span class="focus-input100"></span>
				</div>
				<div class="container-contact100-form-btn">
					<div class="wrap-contact100-form-btn">
						<div class="contact100-form-bgbtn"></div>
						<button class="contact100-form-btn">
							<span>
								Submit
								<i class="fa fa-long-arrow-right m-l-7" aria-hidden="true"></i>
							</span>
						</button>
					</div>
				</div>
			</form>
		</div>
	</div>
	<div class="container">
	<div id='table' class="container mt-5">
		{% if prodata%}
		{% for item in prodata %}
		<div class="text-center mx-auto">
			<h1 style="text-align:center;">
				<strong style="color: #a64bf4;">{{ item.productname }}</strong>
			</h1>
		</div>
		<div class="table-responsive table-striped" id="tableaagyga">
			<table class="table">
				<thead class="markk">
					<tr>
						<th scope="col">Item Number</th>
						<th scope="col">{{ item.sku }}</th>   
						{% for i in test %}
						<th scope="col"></th> 
						{% endfor %}
					</tr>
				</thead>
				<tbody>
					<tr>
						<tr>      
						<th scope="row">Quantities</th>
						{% for i in items %}
						<td> {{i.quantity}} </td>
						{% endfor %}
					</tr>
					<tr>  
						<th scope="row">Fixed Cost</th>
						{% for i in items %}
						<td> {{i.price}} </td>
						{% endfor %}
					</tr>
						<tr id='pcc'>      
						<th scope="row">Product Cost C$</th>
						{% for i in items %}
						<td> {{i.productcost}} </td>
						{% endfor %}
					</tr>
						<tr id='inp'>      
						<th scope="row">Target Gross Profit(in%)</th>
						{% for i in items %}
						<td><input type="text" value="{{ item.targetgrossprofit }}" class="tgp" size="5"></td>
						{% endfor %}
						</tr>
						<tr id='bcps'>      
						<th scope="row">Base Product Sales Price C$</th>
						{% for i in items %}
						<td> {{i.baseproductsalesprice}} </td>
						{% endfor %}
					</tr>
					<tr class="markk">
						<th></th>
						{% for i in items %}
						<td>  </td>
						{% endfor %}
					</tr>
					<tr class="bg-colorwant">      
						<th	>Options</th>
						{% for i in items %}
						<td>  </td>
						{% endfor %}     
				</tr>
				<!-- background: #a64bf4; #00dbde, #fc00ff; -->
				<!-- background: linear-gradient(left, #00dbde, #fc00ff, #00dbde, #fc00ff); -->
				<tr class="markk">      
					<th>
						Markup Rate(in %) :
						<input class="wrap-input50 input100-select" id="mrk" type="number" size="30" value="{{item.markup}}">

					 </th>  
					{% for i in items %}
					<td>  </td>
					{% endfor %}
				</tr>
				{% for opt in options%}
				{% if item.sku == opt.sku %}
				<tr class="optval">
				   <th scope="row">{{opt}} : <input type="text" step="0.01" value="{{opt.optionvalue}}" size="3" class="optcls">
					   <select name="option"  width="3" class="ddlopt" id="opt{{opt.id}}">
						   <option value="N">No</option>
						   <option value="Y">Yes</option>
						 </select>
				   </th>
				   {% for i in items %}
						<td class="tdopt"> 0 </td>
				   {% endfor %}
			   </tr>
			   {% endif %}
		 {% endfor %}
		 
			   <tr id='tos' class="bg-colorwant">
				   <th>Total Options :</th>
				   {% for i in items %}
				   <td> 0 </td>
				   {% endfor %}
			   </tr>
			   <tr class="markk">
				<th></th>
				{% for i in items %}
				<td>  </td>
				{% endfor %}
			</tr>
			   <tr id='tsp'>
				   <th>Total Sales Price Net/Unit C$ :</th>
				   {% for i in items %}
				   <td>  </td>
				   {% endfor %}
			   </tr>
			   <tr id='fly'>
				   <th>Flyer Price(C) :</th>
				   {% for i in items %}
				   <td>  </td>
				   {% endfor %}
			   </tr>
				</tbody>
			</table>
		</div>
		{% endfor %}
		{% endif %}
	 </div>
		<!-- ############## IMPORT TABLE ############## -->
		{%if improdata %}
		{% for imd in improdata %}
		<div class="text-center mx-auto">
			<h1 style="text-align:center;">
				<strong class="text-primary">{{ imd.productname }}</strong>
			</h1>
		</div>
	 <div class="table-responsive table-striped">
		<table class="table">
			<thead class="thead-dark">
				<tr>
					<th scope="col">Item Number</th>
					<th scope="col">{{ imd.sku }}</th>   
					{% for i in test %}
					<th scope="col"></th> 
					{% endfor %}
				</tr>
			</thead>
			<tbody>
				<tr>
					<tr>      
					<th scope="row">Quantities</th>
					{% for i in items %}
					<td> {{i.quantity}} </td>
					{% endfor %}
				</tr>
				<tr>  
					<th scope="row">Factory Cost</th>
					{% for i in items %}
					<td> {{i.price}} </td>
					{% endfor %}
				</tr>
				<tr>      
					<th scope="row">Setup Fee</th>
					{% for i in items %}
					<td> {{i.setupfee}} </td>
					{% endfor %}
					</tr>
					<tr style="background-color: rgb(142, 253, 253);" id='pcc'>      
					<th scope="row">Product Cost C$</th>
					{% for i in items %}
					<td> {{i.productcost}} </td>
					{% endfor %}
				</tr>
					<tr id='inp'>      
					<th scope="row">Target Gross Profit(in%)</th>
					{% for i in items %}
					<td><input type="text" value="33" class="tgp" size="5"></td>
					{% endfor %}
					</tr>
					<tr style="background-color: rgb(142, 253, 253);" id='bcps'>      
					<th scope="row">Base Product Sales Price C$</th>
					{% for i in items %}
					<td> {{i.baseproductsalesprice}} </td>
					{% endfor %}
				</tr>   
				<tr>      
					<th scope="row">Freight / Unit</th>
					{% for i in items %}
					<td> {{i.freight}} </td>
					{% endfor %}
				</tr>
				<tr>      
					<th scope="row">Freight Mark-Up/ Unit</th>
					{% for i in items %}
					<td> {{i.freightadmin}} </td>
					{% endfor %}
				</tr>
				<tr style="background-color: rgb(142, 253, 253);">      
					<th scope="row" >Total Freight U$</th>
					{% for i in items %}
					<td> {{i.totalfrieght}} </td>
					{% endfor %}
				</tr>
				<tr>      
					<th scope="row" >Duty (in %) : 
						<input type="number" size="30" value="{{imd.duty}}">
					</th>
					{% for i in items %}
					<td> {{i.duty}} </td>
					{% endfor %}
				</tr>
				<tr>      
					<th scope="row" >Mark-Up (in %) :    
				   <input type="number" size="30" value="{{imd.markup}}">
					</th>
					{% for i in items %}
					<td> {{i.markup}} </td>
					{% endfor %}
				</tr>
				<tr style="background-color: rgb(142, 253, 253);">      
					<th scope="row" >Net Duty U$
					</th>
					{% for i in items %}
					<td> {{i.netduty}} </td>
					{% endfor %}
				</tr>
				<tr style="background-color: rgb(34, 247, 97);">      
					<th scope="row">Sub Total</th>
					{% for i in items %}
					<td> {{i.subtotal}} </td>
					{% endfor %}
				</tr>
				<tr style="background-color: rgb(148, 148, 137)">
					<th></th>
					{% for i in items %}
					<td>  </td>
					{% endfor %}
				</tr>
				<tr style="background-color: yellow">      
					<th>Options</th>
					{% for i in items %}
					<td>  </td>
					{% endfor %}     
			</tr>
			<tr style="background-color: skyblue">      
			   <th>
				   Markup Rate(in %) :
				   <input id="mrk" type="number" size="30" value="{{imd.markuprate}}">
				</th>  
			   {% for i in items %}
			   <td>  </td>
			   {% endfor %}
	   </tr>
	   {% for opt in options %}
	   {% if imd.sku == opt.sku %}
	   <tr style="background-color: skyblue">
		<tr class="optval">
			<th scope="row">{{opt}} : <input type="text" step="0.01" value="{{opt.optionvalue}}" size="3" class="optcls">
				<select name="option"  width="3" class="ddlopt" id="opt{{opt.id}}">
					<option value="N">No</option>
					<option value="Y">Yes</option>
				  </select>
			</th>
			{% for i in items %}
			<td class="tdopt"> 0 </td>
			{% endfor %}
		</tr>
		</tr>
			{% endif %}
			{% endfor %}
		   <tr id='tos' style="background-color: rgb(34, 247, 97);">
			   <th>Total Options :</th>
			   {% for i in items %}
			   <td>  0</td>
			   {% endfor %}
		   </tr>
		   <tr style="background-color: rgb(148, 148, 137)">
			<th></th>
			{% for i in items %}
			<td>  </td>
			{% endfor %}
		</tr>
		   <tr >
			   <th><button  id="toggle-btn" class="btn btn-outline-dark" onclick="myFunction()"> Additional Options </button></th>
			   {% for i in items %}
			   <td> </td>
			   {% endfor %}
		   </tr>
		{% for addopt in addoptions %}
	   {% if imd.sku == addopt.sku %}
	   <tr style="background-color: skyblue">
		<tr class="optval" id="myDIV">
			<th scope="row">{{addopt}} : <input type="text" step="0.01" value="{{addopt.optionvalue}}" size="3" class="optcls">
			</th>
			{% for i in items %}
			<td class="tdopt"> 0 </td>
			{% endfor %}
		</tr>
		</tr>
		{% endif %}
		{% endfor %}
		<tr style="background-color: skyblue">      
			<th> Total Sales Price Net Unit U$ </th>  
			{% for i in items %}
			<td> 0 </td>
			{% endfor %}
	</tr>
	<tr>      
		<th>
			Forex :
			<input  type="number" size="30" value="{{imd.forex}}">
		 </th>  
		{% for i in items %}
		<td> {{i.forex}} </td>
		{% endfor %}
</tr>
<tr style="background-color: skyblue">      
	<th> Total Sales Price Net Unit C$ </th>  
	{% for i in items %}
	<td> 0 </td>
	{% endfor %}
</tr>
<tr>      
	<th>Flyer Price(C)</th>  
	{% for i in items %}
	<td> 0 </td>
	{% endfor %}
</tr>
<tr>      
<th>Flyer Price(R)</th>  
{% for i in items %}
<td> 0 </td>
{% endfor %}
</tr>
<tr>     
<th></th> 
{% for i in items %}
<td>  </td>
{% endfor %}
</tr>

<tr>      
<th>Overall GrossMargin$ (In USD)</th>  
{% for i in items %}
<td> 0 </td>
{% endfor %}
</tr>
<tr>      
<th>Overall GrossMargin$ (In %)</th>  
{% for i in items %}
<td> 0 </td>
{% endfor %}
</tr>
			</tbody>
		</table>
	</div>
	{% endfor %}
	{% endif%} 

 </div>

</div>
<hr>
<footer class="footer">
	<div class="container">
	  <span class="text-muted">Copyright&copy; costengine {% now Y %}</span>
	</div>
  </footer>
	<div id="dropDownSelect1"></div>

<!--===============================================================================================-->
	<script src="{% static 'vendor/jquery/jquery-3.2.1.min.js' %}"></script>
<!--===============================================================================================-->
	<script src="{% static 'vendor/animsition/js/animsition.min.js' %}"></script>
<!--===============================================================================================-->
	<script src="{% static 'vendor/bootstrap/js/popper.js' %}"></script>
	<script src="{% static 'vendor/bootstrap/js/bootstrap.min.js' %}"></script>
<!--===============================================================================================-->
	<script src="{% static 'vendor/select2/select2.min.js' %}"></script>
	<script>
		$(".selection-2").select2({
			minimumResultsForSearch: 20,
			dropdownParent: $('#dropDownSelect1')
		});
	</script>
<!--===============================================================================================-->
	<script src="{% static 'vendor/daterangepicker/moment.min.js' %}"></script>
	<script src="{% static 'vendor/daterangepicker/daterangepicker.js' %}"></script>
<!--===============================================================================================-->
	<script src="{% static 'vendor/countdowntime/countdowntime.js' %}"></script>
<!--===============================================================================================-->
	<script src="{% static 'js/main.js' %}"></script>

	<!-- Global site tag (gtag.js) - Google Analytics -->

	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-23581568-13"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-23581568-13');
</script>
<script>
	function myFunction() {
	$("#myDIV").toggle();
	}
	 $("#sel1").change(function() {
	var item=$(this);
	var id = $(this).children(":selected").attr("id");
	$.ajax({
		type: 'POST',
		url: '/main/',
		data: {
		'value': id,
		csrfmiddlewaretoken: '{{ csrf_token }}'
		},
		dataType:'json',
		success: function(data) {
			$.each(data, function (key, entry) {
				var cat=$('#ddlcat');
				var subcat = $('#ddlsubcat');
				var pro = $('#ddlpro');
				cat.empty()
				subcat.empty()
				pro.empty()
				var part = $('#ddlcat');
				part.empty().append($('<option></option>').val('').text('Select'));
				$.each(entry, function (index, item) {
					part.append($('<option></option>').val(item).text(item));
				
				});
			});
		}
	});
	return false;     
	});
	$("#sel2").change(function() {
	var item=$('#ddlcat').val();
	var region = $('#sel1').val();
	$.ajax({
		type: 'POST',
		url: '/subcat/',
		data: {
		'value': item,
		'region':region,
		csrfmiddlewaretoken: '{{ csrf_token }}'
		},
		dataType:'json',
		success: function(data) {
			$.each(data, function (key, entry) {
				var part = $('#ddlsubcat');
				part.empty().append($('<option></option>').val('').text('Select'));
				$.each(entry, function (index, item) {
					part.append($('<option></option>').val(item).text(item));
				});
			});
		}
	});
	return false; 
	});
	$("#sel3").change(function() {
	var region = $('#sel1').val()
	$.ajax({
		type: 'POST',
		url: '/productname/',
		data: {
		'region':region,
		csrfmiddlewaretoken: '{{ csrf_token }}'
		},
		dataType:'json',
		success: function(data) {
			$.each(data, function (key, entry) {
				var part = $('#ddlpro');
				part.empty().append($('<option></option>').val('').text('Select'));
				$.each(entry, function (index, item) {
					var newitem = item.split('>>')[0]
					var skunum = item.split('>>')[1]
					part.append($('<option></option>').val(skunum).text(newitem));
				});
			});
		}
	});
	return false;
	});
</script>
<script src="{% static 'main.js' %}"></script>

</body>
</html>
